\usepackage{inconsolata}
\usepackage[T1]{fontenc}
\usepackage [
n , % or lambda
advantage ,
operators ,
sets ,
adversary ,
landau ,
probability ,
notions ,
logic ,
ff ,
mm,
primitives ,
events ,
complexity ,
oracles ,
asymptotics ,
keys
]{ cryptocode }

\pdfminorversion=7

% font setup from Cody Cutler's thesis
\usepackage{amssymb}
%\usepackage[defaultsans]{lato}
%\usepackage[lf,footnotefigures]{MinionPro} % After amssymb
\usepackage[toc,bib]{tabfigures}

% No Minion Pro?  Uncomment the next line to use Times
%\usepackage{times,mathptmx}
%\usepackage{crimson}
\usepackage[bitstream-charter]{mathdesign}
\usepackage{mathrsfs}

% adapted from https://github.com/jonhoo/thesis/

% for 1.5 line spacing
\usepackage{setspace}
\onehalfspacing

% set up nicer headers/footers (in particular, no capitalization and put page
% number in footer)
\makeatletter
\def\ps@headings{\let\@mkboth\markboth
    \def\@oddfoot{\hfil \rm\thepage \hfil}
    \def\@evenfoot{\hfil \rm\thepage \hfil}
    \def\@evenhead{\hfil \sl \leftmark}	% Left heading.
    \def\@oddhead{\hbox{}\sl \rightmark \hfil}	% Right heading.
    \def\chaptermark##1{\markboth {\ifnum \c@secnumdepth >\m@ne
	\@chapapp\ \thechapter. \ \fi ##1}{}}
    \def\sectionmark##1{\markright {\ifnum \c@secnumdepth >\z@
	\thesection. \ \fi ##1}}
    \pulldownheader				% Bring header down from edge
}
\makeatother

%\pagestyle{headings}

% more colors (like RedOrange)
%\usepackage[dvipsnames]{xcolor}
\newcommand{\sys}{Edna\xspace}
\newcommand{\xxed}{disguised\xspace}
\newcommand{\Xxed}{Disguised\xspace}
\newcommand{\xxing}{disguising\xspace}
\newcommand{\Xxing}{Disguising\xspace}
\newcommand{\Xx}{Disguise\xspace}
\newcommand{\Xxs}{Disguises\xspace}
\newcommand{\xx}{disguise\xspace}
\newcommand{\xxs}{disguises\xspace}

\newcommand\ms[1]{\textcolor{red!55!blue}{[malte: {#1}]}}
\newcommand\lyt[1]{\textcolor{red!55!red}{[lyt: {#1}]}}
\newcommand\hmng[1]{\textcolor{blue!40!red}{[hmng: {#1}]}}
\newcommand\eddie[1]{\textcolor{blue!55!blue}{[E: {#1}]}}
\newcommand\newc{\color{green!55!blue}}
\newcommand\oldc{\color{red!50}}
\newcommand\normalc{\color{black!100}}
\newcommand{\tabitem}{~~\llap{\textbullet}~~}
\newcommand{\eg}{{e.g.},\xspace}
\newcommand{\ie}{{i.e.},\xspace}
\newcommand{\vs}{{vs.}\xspace}

% Enumeration commands
\newcommand{\one}{({\em i}\/)}
\newcommand{\two}{({\em ii}\/)}
\newcommand{\three}{({\em iii}\/)}
\newcommand{\four}{({\em iv}\/)}
\newcommand{\five}{({\em v}\/)}
\newcommand{\six}{({\em vi}\/)}

\newcommand{\One}{\textbf{({1}\/)}}
\newcommand{\Two}{\textbf{({2}\/)}}
\newcommand{\Three}{\textbf{({3}\/)}}

\hyphenation{set-ups pseu-do-nymize}


% qualitative colors
% subset of https://jfly.uni-koeln.de/color/
% that is also distinctive in grayscale
\definecolor{set1}{HTML}{0071b2} % blue
\definecolor{set2}{HTML}{e59c00} % orange
\definecolor{set3}{HTML}{009e73} % green
\definecolor{set4}{HTML}{efe440} % yellow

\definecolor{codegreen}{rgb}{0,0.4,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\newcommand\head[1]{\vspace{6pt}\noindent\textbf{#1}}

% records stuff
\newcommand\fn[1]{\texttt{{#1}}}
\newcommand\op[1]{\ensuremath{\texttt{op}_{#1}}}
\newcommand\privk[1]{\texttt{\ensuremath{\texttt{k}^{\text{pri}}_{#1}}}}
\newcommand\pubk[1]{\texttt{\ensuremath{\texttt{k}^{\text{pub}}_{#1}}}}
\newcommand\symk[1]{\texttt{\ensuremath{\texttt{k}_{#1}}}}

\newcommand\tdiff[1]{\ensuremath{\texttt{R}^{\texttt{diff}}_{#1}}}
\newcommand\town[1]{\ensuremath{\texttt{R}^{\texttt{sf}}_{#1}}}
\newcommand\lcapa[1]{\ensuremath{\texttt{L}_{#1}}}
\newcommand\sysk{\texttt{\ensuremath{\texttt{k}_{\text{\sys}}}}}

\newcommand\app[1]{\ensuremath{\texttt{A}({#1})}\xspace}
\newcommand\rev[1]{\ensuremath{\texttt{R}({#1})}\xspace}
\newcommand\xstart{\ensuremath{x_{\texttt{start}}}\xspace}
\newcommand\xhist[1]{\ensuremath{x_{#1}}\xspace}
\newcommand\appcompone{\ensuremath{\mathcal{S}_1}\xspace}
\newcommand\appcomptwo{\ensuremath{\mathcal{S}_2}\xspace}
\newcommand{\syscrypt}{Edna+\allowbreak CryptDB\xspace}

% for protocols
\createpseudocodeblock{pcb}{center,boxed}{}{}{}
\createprocedureblock{procb}{center,boxed}{}{}{}

% bold faced captions
%\captionsetup{textfont=rm,belowskip=-8pt,aboveskip=8pt}

% so we can splice in PDFs
\usepackage{pdfpages}

% set up bibliography
\usepackage[square,comma,numbers,sort&compress]{natbib}
\usepackage{bibentry}

% enumerate* and itemize*
\usepackage[inline]{enumitem}

% for \begin{comment}
\usepackage{verbatim}

% for source-code listings
% (latex.out fixes compatibility with latexrun, see
% https://github.com/aclements/latexrun/issues/13#issuecomment-322550767)
\usepackage[newfloat,outputdir=latex.out]{minted}
\setminted[rust]{frame=lines}
\setminted[c]{frame=lines}
\usepackage{listings, listings-rust, listings-pseudo}

\lstdefinestyle{rust}{
    language = Rust,
    aboveskip=0mm,
    belowskip=0mm,
    basicstyle=\ttfamily\footnotesize,
    stringstyle=\color{blue},
    %backgroundcolor=\color{backcolour},
    commentstyle=\color{codegreen},
    keywordstyle=\color{codepurple},
    keywordstyle=[2]{\color{lime}},
    morekeywords=[2]{StartDisguise,EndDisguise}
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=2
}
\lstset{style=rust}

\lstdefinestyle{pseudo}{
    language = Pseudo,
    aboveskip=0mm,
    belowskip=0mm,
    basicstyle=\ttfamily\footnotesize,
    stringstyle=\color{blue},
    %backgroundcolor=\color{backcolour},
    commentstyle=\color{codegreen},
    keywordstyle=\color{codepurple},
    keywordstyle=[2]{\color{lime}},
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=2
}
%\lstset{style=pseudo}

% for formulas
\usepackage{mathtools}

% to split lists into multiple columns
\usepackage{multicol}

% for "on page NN" reference
\usepackage[nospace]{varioref}

% for \ifoptionfinal
\usepackage{ifdraft}

% for nice tables
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{array,ragged2e}

% \xspace
\usepackage{xspace}

% subfigures
\usepackage{subcaption}
% default space between figure and caption
\captionsetup[figure]{skip=0.5\baselineskip}

% fpeval (to add numbers)
\usepackage{xfp}

\PassOptionsToPackage{hyphens}{url}
\usepackage[breaklinks, pdfborder={0 0 0}]{hyperref}
\usepackage[nameinlink]{cleveref}

\hypersetup{
    colorlinks=true,
    linkcolor=set1,
    filecolor=magenta,
    urlcolor=set1,
    citecolor=set3,
    pdftitle={Flexible Privacy via Disguising and Revealing},
    pdfauthor={Lillian Tsai},
}

% set the format of figure numbers
%\renewcommand{\thefigure}{\arabic{chapter}-\arabic{figure}}
% restore these definitions to color wp/wpc and braces
% \newcommand{\syntax}[1]{\textcolor{blue}{#1}}
% \newcommand{\syntaxbraced}[1]{\cleft[blue]\{#1\cright[blue]\}}
\newcommand{\syntax}[1]{#1}
\newcommand{\syntaxbraced}[1]{\{#1\}}

\usepackage{pftools}
\usepackage{amsmath}
\usepackage{amssymb}

% used in \loc macro
\usepackage{numprint}

% some sanity for special characters
\usepackage[utf8]{inputenc}
\input{glyphtounicode}
\pdfgentounicode=1

% generate synctex output for inverse search
\synctex=1

% gnuplot figures have some page group issue, see
% https://tex.stackexchange.com/questions/76273/multiple-pdfs-with-page-group-included-in-a-single-page-warning
\pdfsuppresswarningpagegroup=1

%% do not reset page numbers at \mainmatter
%\let\mainmatterorig\mainmatter
%\renewcommand\mainmatter
% {\edef\p{\arabic{page}}%
%  \mainmatterorig
%  % we need to compute the actual current page number. we know the page number
%  % from _before_ we called \mainmatter. but what is it now? well, it is
%  % certainly that +1. but we also need to account for the next chapter starting
%  % on a "right" (odd) page. we do this by adding the page number modulo two.
%  % TODO: double check before final version
%  \setcounter{page}{\p+1+(\p-\p/2*2)}%
% }

% adding TODOs
\newcommand{\insertnote}[3]{\noindent\textcolor{#1}{\textbf{#2:} #3}}
\newcommand{\note}[1]{\insertnote{blue}{NOTE}{#1}}
\newcommand{\todocite}[1]{\textcolor{red}{[cite #1]}}

% https://tex.stackexchange.com/questions/52697/automated-lists-for-todos-in-latex-document
\newcounter{todo}
\newcommand\todo[1]{\refstepcounter{todo}\textcolor{red}{#1}%
\addcontentsline{tod}{subsection}{\thetodo.~(\S\thesection)~#1}}%
\makeatletter
\newcommand\listoftodos{%
  \pdfbookmark{todo list}{Contents}
  \chapter*{List of TODOs}\@starttoc{tod}}
\makeatother

% a command to indicate current editing progress
\newcommand{\resume}{
  \begin{center}
    \color{set2}
    \hrule \vspace{1pt} \hrule \hrule
    \vspace{10pt}
    \textbf{This section is not yet complete.}
    \vspace{10pt}
    \hrule \hrule \vspace{1pt} \hrule
  \end{center}
}

\usepackage{relsize}
% sets monospace font
\renewcommand{\ttdefault}{pxtt}

