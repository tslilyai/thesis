This thesis envisions a world in which web services routinely
protect, store, and reveal \xxed user data with user permission.
%
To move towards this goal, we present \sys, a system that gives users back
flexible privacy controls over their data via data disguising.
%
With \sys, developers can provide data \xxing and revealing transformations that
give users control over their data in web applications.
%
Throughout this thesis, we describe how these transformations help users protect
inactive accounts, selectively dissociate personal data from public profiles,
and remove a web service's access to their data without permanently losing their
accounts.
%
We showed that \sys supports disguised data in real-world applications with
reasonable performance.
%
However, \sys is just the beginning. To truly achieve a world in which web
applications meet the desired flexible privacy standards, several
challenges remain unsolved, which we describe here as future
opportunities for research.
%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{\sys in the Real World}

Supporting disguised data in web applications that have millions or more users,
operate with low cost margins, and/or distribute their compute and storage
across multiple regions raises several open questions.

%
\paragraph{Disguised Data Storage.} If \eg millions of users disguise their data
over time, disguised data may become too much for applications to store.
%
Even though storage is historically cheap, and applications today willingly
store and retain user data nearly indefinitely, eventually disguised data
(particularly since it cannot be sold or processed) may burden the application.
%
\sys currently retains disguised data in its disguised table until a user
reveals their disguised data, which could be forever if users choose to never
reveal data.
%
Instead, \sys could allow applications to put reasonable, coarse-grained time
limits (\eg 10 years) on disguised data to eventually clean it up, without
leaking fine-grained information about which data was disguised at the same
time.
%

%
\paragraph{Deriving Value from Disguised Data.} As mentioned, even if
applications \emph{do} store disguised data, the cost of doing so may not pay
off, since applications cannot derive value from it because it remains
confidential. 
%
Potentially some clever cryptography such as additive homomorphic secret sharing
as done in Zeph~\cite{zeph}, may allow \sys to support limited computation such
as aggregations over disguised data from which an application can derive value.
%
However, such cryptographic approaches require some initial setup to determine
whose data can be aggregated with whose (in order to split the secrets
appropriately) and who should be able to reveal the result (can individual users
also perform aggregates, or just the application?) Futhermore, defining groups
of users whose data can be combined requires more thought into what these groups
may reveal about their constituents.
%
Homomorphic encryption techniques are also historically regarded as impractical
due to their performance overheads.
%

\paragraph{\sys in Highly-Scalable Systems}
Many web services, particularly those at scale, run on machines in various
regions and datacenters, and replicate and shard their database.
%
In such applications, \sys may need to handle thousands or more disguising (or
revealing) requests per second.
%
\sys currently runs disguising and revealing transformations in transactions on
a single database server sequentially. 
%
\sys's reliance on transactions for correct disguising and reveal semantics do
affect the ability for applications to run disguises in parallel with many
application operations.
%
We evaluated the cost of constantly performing a single such transaction and
showed it to be moderate, but running several such disguise transactions in
parallel could lead to performance failure (\eg it may resulting in the same
application operation throughput when running a single disguise at once, but
drastically increase the latency of a disguise/reveal transformations; or
greatly reduce application operation throughput).
%
Handling this problem may require significant redesign: for example, perhaps
large disguise and reveal transactions must split into multiple, per-table
transactions, so as to not lock all tables at once. In doing so, however, \sys
makes weaker guarantees about inter-table dependencies. Finding the right
tradeoff between consistency and performance---a classic problem---then
becomes the main challenge.
%

%
To support distributed services, \sys will also need to support disguises that
affect data sharded across multiple database servers.
%
Again, the challenge here is trading off consistency and performance.  If
developers wish to maintain \sys's transactional guarantees for disguises and
reveals, they must support distributed transactions and maintain consistency
between replicas potentially disguised at different points. While most web
applications already implement these for their normal application operations,
\sys's large transactions may overly affect performance and \eg need to be
broken into per-shard-server transactions.
%
\todo{distributed transactions citation? other ways to distribute databases?}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Disguising Beyond \sys: Flexible Access Control}

Zooming out beyond disguised user data for web applications, we can imagine
completely different directions in which disguising for flexible privacy could
be applied. We describe here using many of the same disguising abstractions to
provide flexible access control, where the application itself needs to control
user data exposure to insiders.

Today, thousands of insiders at companies have access to sensitive user data,
and this access can lead to devastating data leaks.
\todo{cite?}
%
One important part of this problem stems from the fact that today, employees
have access to all the data that they need for their job at any point in time.
For example, a hotel employee might be given authorization to see the full room
booking and customer database because they need this information to perform
their job, such as performing aggregates to determine room occupancy; or helping
customers manage their bookings
%
However, we make the key observation that these employees do not \emph{always} need
\emph{all} of this information.

Instead, we envision a world where every employee operates atop a personalized
redacted database that contains the minimum amount of data they need
continuously. For example, a hotel customer service representative might only
need to be able to look at room occupancy and see free rooms when not actively
helping a customer.
%
Similarly, a business intelligence analyst might need to be able to compute
aggregates and statistics using coarse-grained data like area codes, but not
need to see unique user identifiers like usernames or precise phone numbers.
%

%
However, redacted databases would present only the minimal amount of data the
employee needs for common, daily operations. If, for example, a particular
customer needs assistance, the employee currently helping the customer should be
able to change their redactions temporarily and dynamically to expose only the
necessary parts of that user's data.
%
Different employees simultaneously helping different customers can apply
different upgrades to get a partially redacted view of the database
individualized for that employee.
%
As soon as the employee no longer needs the user's data, the employeeâ€™s access
returns back to its original, minimally exposing state.

%
To achieve this world of minimalist yet flexible access control, we need a database
system that can dynamically change redactions that apply to each employee, but
present a consistent view of the redacted database to each employee. A strawman
solution might attempt to do so with personalized database views (similar to the
proposal in Multiverse DB~\cite{multiverse}), but this would require an enormous
number of views (potentially one for each employee, and for each upgrade the
employee applies).
%
Furthermore, redactions would need to handle referential integrity, work even in
the presence of indexes and database views, and work with existing query
optimizations without overly affecting performance.
%
Employees must also have the ability to flexibly perform fine-grained upgrades
of their access without compromising security.
%
While disguising and revealing abstractions can help address some of these
challenges (\eg handling referential integrity when performing redactions, and
providing ways to specify redactions and upgrades), achieving a database system
for flexible access control requires solving many new challenges.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Final Thoughts}
We increasingly live in a world where user data lies at the mercy of web
services, which reduces or removes users' ability to control the privacy of their
data as they wish.
%
While \sys represents just one step forward in improving user data privacy on
the web, \sys provides proof to both web services and regulators that flexible
privacy features can be supported with reasonable efforts, and thus can
and should be widely implemented and enforced.
%
